<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        img {
            display: block;
        }
    </style>
</head>
<body>


<div style="position: relative; height: 300px; background-color: red">123123</div>
<div id="js-lazy-load" style="position: relative">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
    <img src="http://via.placeholder.com/150x550" data-src="" alt="">
</div>


<script>

  let imgSrcArray = ['http://pic.58pic.com/58pic/17/18/97/01U58PIC4Xr_1024.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p01N203pHTU7/Wr5314kcLAtVCi.jpg!t',
    'http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p01a3SXHo2hZ/XYAC5TLk4uYWXn.jpg!t',
    'http://pic1.cxtuku.com/00/16/18/b3809a2ba0f3.jpg',
    'http://img.bitscn.com/upimg/allimg/c150708/14363B06253120-6060O.jpg',
    'http://pic.58pic.com/58pic/17/18/97/01U58PIC4Xr_1024.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p015trgKM7vw/H0iyDPPneOVrA4.jpg!t',
    'http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg',
    'http://imgsrc.baidu.com/baike/pic/item/2f9cbdcc5e0bcf5c00e9283b.jpg',
    'http://pic1.cxtuku.com/00/16/18/b3809a2ba0f3.jpg',
    'http://img.bitscn.com/upimg/allimg/c150708/14363B06253120-6060O.jpg',
    'http://pic.58pic.com/58pic/17/18/97/01U58PIC4Xr_1024.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p015trgKM7vw/H0iyDPPneOVrA4.jpg!t',
    'http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg',
    'http://imgsrc.baidu.com/baike/pic/item/2f9cbdcc5e0bcf5c00e9283b.jpg',
    'http://pic1.cxtuku.com/00/16/18/b3809a2ba0f3.jpg',
    'http://img.bitscn.com/upimg/allimg/c150708/14363B06253120-6060O.jpg',
    'http://pic.58pic.com/58pic/17/18/97/01U58PIC4Xr_1024.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p015trgKM7vw/H0iyDPPneOVrA4.jpg!t',
    'http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg',
    'http://imgsrc.baidu.com/baike/pic/item/2f9cbdcc5e0bcf5c00e9283b.jpg',
    'http://pic1.cxtuku.com/00/16/18/b3809a2ba0f3.jpg',
    'http://img.bitscn.com/upimg/allimg/c150708/14363B06253120-6060O.jpg',
    'http://pic.58pic.com/58pic/17/18/97/01U58PIC4Xr_1024.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p015trgKM7vw/H0iyDPPneOVrA4.jpg!t',
    'http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg',
    'http://imgsrc.baidu.com/baike/pic/item/2f9cbdcc5e0bcf5c00e9283b.jpg',
    'http://pic1.cxtuku.com/00/16/18/b3809a2ba0f3.jpg',
    'http://img.bitscn.com/upimg/allimg/c150708/14363B06253120-6060O.jpg',
    'http://pic.58pic.com/58pic/17/18/97/01U58PIC4Xr_1024.jpg',
    'http://cover.read.duokan.com/mfsv2/download/fdsc3/p015trgKM7vw/H0iyDPPneOVrA4.jpg!t',
    'http://77fkxu.com1.z0.glb.clouddn.com/20160308/1457402219_73571.jpg',
    'http://imgsrc.baidu.com/baike/pic/item/2f9cbdcc5e0bcf5c00e9283b.jpg',
    'http://pic1.cxtuku.com/00/16/18/b3809a2ba0f3.jpg',
    'http://img.bitscn.com/upimg/allimg/c150708/14363B06253120-6060O.jpg'];

  let imgList = document.querySelector('#js-lazy-load').children;

  for (let i = 0; i < imgList.length; i++) {
    imgList[i].dataset.src = imgSrcArray[i];
  }

  function getOffsetTop(obj) {
    let h = 0;
    while (obj) {
      h += obj.offsetTop;
      obj = obj.offsetParent;
    }
    return h
  }

  let throttle = function (fn, delay, atLeast) {
    let timer = null;
    let startTime = null;
    return function () {
      let now = new Date();
      clearTimeout(timer);
      if (now - startTime >= atLeast) {
        fn();
        console.log("now: " , now);
        console.log("startTime: " , startTime);
        console.log("now - startTime: " , now - startTime);
        startTime = now;
      } else {
        timer = setTimeout(fn, delay)
      }
    }
  };

  function updateImgSrc(obj) {
    obj.src = obj.dataset.src;
  }
  let n = 0;
  function lazyLoad() {
    for (let i = n; i < imgList.length; i++) {
      let top = getOffsetTop(imgList[i]);
      let seenHeight = window.innerHeight + window.scrollY || document.documentElement.scrollTop || document.body.scrollTop
      if (top < seenHeight) {
        if (imgList[i].getAttribute('src') === 'http://via.placeholder.com/150x550') {
          updateImgSrc(imgList[i]);
        }
        n += 1;
      }
    }
  }

  window.addEventListener('scroll', throttle(lazyLoad, 1000, 3000), false);


</script>


</body>
</html>